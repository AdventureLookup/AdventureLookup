{% extends 'base.html.twig' %}

{% block body %}
    {% import _self as macros %}
    <div class="container">
        <div class="row">
            <div class="col adventure-show--details">
                <h4 class="my-3">{{ adventure.title }}</h4>
                {% if adventure.thumbnailUrl %}
                    <img src="{{ adventure.thumbnailUrl }}" class="ml-1 pull-right"
                         style="max-width: 120px; max-height: 140px;"/>
                {% endif %}
                <p>{{ adventure.description|nl2br }}</p>
                <div class="clearfix"></div>
                <div>
                    <div class="data-row">
                        <div class="col">
                            <div class="label">Written By</div>
                            {{ adventure.authors|join(', ') }}
                        </div>
                        <div class="col">
                            <div class="label">Published By</div>
                            {{ adventure.publisher }}
                        </div>
                        <div class="col">
                            <div class="label"># Of Pages</div>
                            {{ adventure.numPages }}
                        </div>
                    </div>
                    <div class="data-row">
                        {% if adventure.link %}
                            <div class="col">
                                <div class="label">Link</div>
                                <a href="{{ adventure.link|e('html_attr') }}">{{ adventure.link }}</a>
                            </div>
                        {% endif %}
                        <div class="col">
                            <div class="label">Found In</div>
                            {{ adventure.foundIn }}
                        </div>
                    </div>
                    <div class="data-row">
                        <div class="col">
                            <div class="label">System / Edition</div>
                            {{ adventure.edition }}
                        </div>
                        <div class="col">
                            <div class="label">Setting</div>
                            {{ adventure.setting }}
                        </div>
                    </div>
                    <div class="data-row">
                        <div class="col">
                            <div class="label">Starting Level Range</div>
                            {{ adventure.startingLevelRange }}
                        </div>
                        <div class="col">
                            <div class="label">Min. Starting Level</div>
                            {{ adventure.minStartingLevel }}
                        </div>
                        <div class="col">
                            <div class="label">Max. Starting Level</div>
                            {{ adventure.maxStartingLevel }}
                        </div>
                    </div>
                    <div class="data-row">
                        <div class="col">
                            <div class="label">Handouts?</div>
                            {{ adventure.handouts|bool2str }}
                        </div>
                        <div class="col">
                            <div class="label">Tactical Maps?</div>
                            {{ adventure.tacticalMaps|bool2str }}
                        </div>
                        <div class="col">
                            <div class="label">Soloable?</div>
                            {{ adventure.soloable|bool2str }}
                        </div>
                        <div class="col">
                            <div class="label">Includes Characters?</div>
                            {{ adventure.pregeneratedCharacters|bool2str }}
                        </div>
                    </div>
                    <div class="data-row">
                        <div class="col">
                            <div class="label">Notable Items</div>
                            <ul>
                                {% for item in adventure.items %}
                                    <li>{{ item }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <div class="data-row">
                        <div class="col">
                            <div class="label">Notable NPCs</div>
                            <ul>
                                {% for npc in adventure.npcs %}
                                    <li>{{ npc }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                    <div class="data-row">
                        <div class="col">
                            <div class="label">BBEG & Monsters</div>
                            <ul>
                                {% for monster in adventure.monsters %}
                                    <li>{{ monster }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                {% if is_granted('ROLE_CURATOR') %}
                    <div class="bg-faded p-3">
                        <a class="btn btn-secondary btn-sm my-3"
                           href="{{ path('adventure_edit', { 'id': adventure.id }) }}">Edit adventure</a>
                        {{ form_start(delete_form) }}
                        <input class="btn btn-sm btn-danger mt-3" type="submit" value="Delete" role="button"
                               onclick="return confirm('Do you really want to delete this adventure?')">
                        {{ form_end(delete_form) }}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
